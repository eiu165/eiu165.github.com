<!DOCTYPE HTML>
<html>
    <head> 
        <link href="files/main.css" rel="stylesheet" type="text/css" />
        <style type="text/css">

            body {  
                height: 700px;
                width: 10000px;
                background: url(img/sky.jpg) repeat-y  ; 
            }
            .page {
                width: 2000px;
                float:left;  
            } 
        </style> 
        <style type="text/css">  
            .parallax {	z-index: 3;	position: fixed; 	top: 0;  	}  
            .parallax div {  position: absolute;   } 
        </style> 
    </head>
    <body>
        
        <div id="wrapper">
            <div id="page0" class="page">
                aa

            </div>
            <div id="page1" class="page">
                aa

            </div>
            <div id="page2" class="page">

                aa
            </div>
            <div id="page3" class="page">
                aa

            </div>
            <div id="page4" class="page"> 
                page4
            </div> 
        </div>
        <div id="nav">
            <ul>
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
                <li>5</li> 
            </ul>
        </div>
        
        <div class="parallax"  data-speed-x="-1"  data-speed-y="0.4" >
            <div   data-frame-y="220" data-frame-x="200" data-frame="0"  ><img src="./img/moon.png"  /></div>
            <div   data-frame-y="250" data-frame-x="420" data-frame="2" ><img src="./img/sun.png"  /></div>
            <div   data-frame-y="250" data-frame-x="420" data-frame="3" ><img src="./img/sun.png"  /></div>
        </div>
        <div class="parallax"  data-speed-x="0"  data-speed-y="0.8" >
            <div   data-frame-y="220" data-frame-x="200" data-frame="1"  ><img src="./img/moon.png"  /></div>
            <div   data-frame-y="350" data-frame-x="420" data-frame="4" ><img src="./img/sun.png"  /></div>
            
        </div>
        
        <div class="parallax"  data-speed-x="-0.4"  data-speed-y="0.0" >
            <div   data-frame-y="800" data-frame-x="420" data-frame="3" ><img src="./img/tree.png"  /></div>
            <div   data-frame-y="750" data-frame-x="320" data-frame="4" ><img src="./img/tree.png"  /></div> 
        </div>
        
        
        <div class="parallax"  data-speed-x="-0.8"  data-speed-y="0.2" >
            <div data-frame-y="220" data-frame-x="350"  data-frame="0" ><img src="./img/cloud.png"  /></div> 
            <div  data-frame-y="220" data-frame-x="350" data-frame="1"  ><img src="./img/cloud.png"  /></div> 
            <div data-frame-y="460" data-frame-x="150" data-frame="0"  ><img src="./img/cloud.png"  /></div>  
            <div data-frame-y="320" data-frame-x="410" data-frame="1"  ><img src="./img/cloud.png"  /></div> 
            <div data-frame-y="320" data-frame-x="410" data-frame="2" ><img src="./img/cloud.png"  /></div> 
            <div  data-frame-y="220" data-frame-x="350" data-frame="2"  ><img src="./img/cloud.png"  /></div> 
            <div  data-frame-y="220" data-frame-x="650" data-frame="3"  ><img src="./img/cloud.png"  /></div> 
            <div  data-frame-y="220" data-frame-x="650" data-frame="4"  ><img src="./img/cloud.png"  /></div> 
        </div>

        <div class="parallax"  data-speed-x="-0.8"  data-speed-y="0.0" > 
            <div data-frame-y="620" data-frame-x="160" data-frame="0" ><img src="./img/cloud.png"  /></div> 
            <div data-frame-y="320" data-frame-x="410" data-frame="0" ><img src="./img/cloud.png"  /></div> 
            <div data-frame-y="420" data-frame-x="360" data-frame="1"  ><img src="./img/cloud.png"  /></div> 
            <div data-frame-y="260" data-frame-x="550" data-frame="1"    ><img src="./img/cloud.png"  /></div>  
            <div data-frame-y="460" data-frame-x="150" data-frame="2"  ><img src="./img/cloud.png"  /></div>  
            <div data-frame-y="420" data-frame-x="360" data-frame="2"  ><img src="./img/cloud.png"  /></div>   
            <div data-frame-y="420" data-frame-x="460" data-frame="3"  ><img src="./img/cloud.png"  /></div>  
            <div data-frame-y="420" data-frame-x="400" data-frame="4"  ><img src="./img/cloud.png"  /></div> 
        </div>
        <div class="parallax"  data-speed-x="0"  data-speed-y="0.4" >
            <div  data-frame-y="220" data-frame-x="400"  data-frame="0"><img src="./img/star.png"  /></div>                                                    
            <div  data-frame-y="420" data-frame-x="700"  data-frame="0"><img src="./img/star.png"  /></div>                                                    
            <div  data-frame-y="520" data-frame-x="600"  data-frame="0"><img src="./img/star.png"  /></div>                                                   
            <div  data-frame-y="120" data-frame-x="700"  data-frame="0"><img src="./img/star.png"  /></div>                                               
            <div  data-frame-y="120" data-frame-x="900"  data-frame="0"><img src="./img/star.png"  /></div>                                             
            <div  data-frame-y="320" data-frame-x="1000"  data-frame="0"><img src="./img/star.png"  /></div>                                          
            <div  data-frame-y="420" data-frame-x="1100"  data-frame="0"><img src="./img/star.png"  /></div>
            <div  data-frame-y="220" data-frame-x="400"  data-frame="1" ><img src="./img/star.png"  /></div> 
            <div  data-frame-y="420" data-frame-x="700"  data-frame="1"><img src="./img/star.png"  /></div>
            <div  data-frame-y="520" data-frame-x="600"  data-frame="1"><img src="./img/star.png"  /></div>
            <div  data-frame-y="120" data-frame-x="700"  data-frame="1"><img src="./img/star.png"  /></div>
        </div>
        
        <div class="parallax"  data-speed-x="4.0"  data-speed-y="-0.4" >
            <div  data-frame-y="620" data-frame-x="-100"  data-frame="3"><img src="./img/leaf.png "  /></div>    
        </div>


    </body>
</html> 

<script src="files/jquery.min.js" type="text/javascript"></script>
<script src="files/modernizr.custom.37797.js" type="text/javascript"></script>

<script  type="text/javascript">

    var hotSpots = [0, 2000, 4000, 6000, 8000];
    function findStart(ele, dir) {
        console.log(ele);
        var pos = parseFloat(ele.attr('data-frame-' + dir));
        var speed = parseFloat(ele.closest('.parallax').attr('data-speed-' + dir)); 
        var scroll = parseFloat(hotSpots[ele.attr('data-frame')]);
        var start = scroll * speed + pos;
        console.log('pos:' + pos + ' speed:' + speed + ' scroll:' + scroll + ' start:' + start );
        return start  + 'px';
    }
    function initParallax() {

        $('.parallax div[data-frame]').css({ 'top': function () { return findStart($(this), 'y'); }, 'left': function () { return findStart($(this), 'x'); } });

        /*
        $('.parallax div[data-frame]').css({
            'top': function () {
                var posy = $(this).css('top');
                var sy = $(this).closest('.parallax').attr('data-speed-y');
                var frame = $(this).attr('data-frame');
                var scroll = hotSpots[frame];
                console.log('posy:' + posy + ' sy:' + sy);
                var starty = scroll * sy + posy;
                return starty + 'px';
            }, 'left': function () {
                var posx = $(this).css('left');
                var sx = $(this).closest('.parallax').attr('data-speed-x');
                var frame = $(this).attr('data-frame');
                var scroll = hotSpots[frame];
                var startx = scroll * sx + posx;
                console.log('posx:' + posx + ' sx:' + sx + ' startx:' + startx);
                return startx + 'px';
            }
        });
        */
        //$('#p1-1').css({ 'top': '220px' , 'left':'200px'}); 
    }

    $(document).ready(function () { 
        $('.page').css('background-color', 'yellow');
        $('.page:even').css('background-color', 'red');
        initParallax(); 
    });

</script>


<script src="files/parallax.js" type="text/javascript"></script>
 